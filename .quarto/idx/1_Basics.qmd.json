{"title":"AWK basics","markdown":{"headingText":"AWK basics","containsRefs":false,"markdown":"\n## Formating tables\n\n### Replacing empty space with symbols\n\nIn a tab delimited file, replace any empty field with a `-`\n\n```{bash}\nawk 'BEGIN {FS = OFS = \"\\t\"} {for(i=1; i<=NF; i++) if($i ~ /^ *$/) $i = \"-\" }; 1' input > input_new\n\n```\n\n### Add new columns based on conditions\n\nExample usage:\nIf a value in column 4 is larger than the value in column 5 give it a notification, otherwise use a -.\n\n```{bash}\nwk  -v OFS='\\t' '{if ($4 > $5){ $7=\"high_score\" }else{ $7=\"-\"} print }' input > input_new\n```\n\n### Replacing column names\n\nExample: replace the first column name to accession\n\n```{bash}\nawk 'BEGIN{FS=\"\\t\";FS=\"\\t\"; OFS=\"\\t\"}{if(NR==1) $1=\"accession\"} {print $0 }' input > input_new\n```\n\n## Subsetting tables\n\n### Print lines that have specific pattern.\n\n```{bash}\n#just print rows if they contain the word hello in the 5th column\nawk  '$5 == \"hello\"' Input\n\n#look for a pattern and define what we want to print\nawk '/hello/ {print $1}' Input\nawk '$5 == \"hello\" {print $1}' Input\n\n#we can also search for more than one pattern\nawk '$1 ~ /John|Eric/ {print $0}' Input\n\n#print everything, except rows with John and Eric\nawk '!/John|Eric/ {print $1,$3}' Input\nawk '$1 !~ /John|Eric/ {print $1,$3}' Input\n```\n\n### Split tables by categories\n\nImagine we have a table listing people from different states, the states are listed in column 3. With awk we can easily split this one table, into multiple tables, one each per state\n\n```{bash eval=FALSE}\n#print all columns, one table/state\nawk '{print > $3\".txt\"}'  Input\n\n#print only the first column, one table/state\nawk '{print $1 > $3\".txt\"}'  Input\n```\n\nThis command will generate several new text files in our working directory.\n\n## Splitting columns\n\nWe can also split columns. \nFor example, we could have something like this in the first column: BinID-accession.\nNow we want to split this in two columns, one for the binID , the second should contain the accession.\n\nSome new syntax for AWK:\n\n- **split()** =  the function 'split' divides a string into pieces\n- **$1** =  The column we want to split\n- **\"x\"** =  The pattern we want to use for splitting\n- **a** =  We name the ARRAY we generate 'a'. An ARRAY is similar to a variable you just can store more information in the array we store the different pieces that were split\n- **a[1]** =  retrieve the first part of the split array =E\n- **a[2]** =  retrieve the second part of the split array =1\n\n```{bash}\nawk 'BEGIN{FS=OFS=\"\\t\"}{split($1,a,\"-\")} {print $1,a[1],a[2]}' Input\n```\n\n## print the header of a table\n\n```{bash eval=FALSE}\nawk -F'\\t' '{for (i = 1; i <= NF; ++i) print i, $i; exit }' temp1\n```\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":false,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"1_Basics.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.1.168","bibliography":["references.bib"],"knitr":{"opts_chunk":{"collapse":true}},"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":false,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","highlight-style":"github","output-file":"1_Basics.pdf"},"language":{},"metadata":{"block-headings":true,"bibliography":["references.bib"],"knitr":{"opts_chunk":{"collapse":true}},"documentclass":"scrreprt","geometry":["top=4mm","left=4mm","heightrounded"],"fontfamily":"libertinus","pandoc_args":"--listings","includes":{"in_header":"preamble.tex"},"colorlinks":true},"extensions":{"book":{}}}}}